

-- оттак в консолі бази данних
-- Створення бази даних з авто ID
CREATE TABLE person(
       id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
       name varchar NOT NULL,
       age int CHECK ( age>0 ),
       email varchar UNIQUE
)


-- Каскадне видалення

DROP TABLE "order";
DROP TABLE person1;

CREATE TABLE person1 (
    user_id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
    name varchar(100 ) NOT NULL ,
    age int
);

CREATE TABLE "order"(
    order_id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
    user_id int REFERENCES person1(user_id) ON DELETE CASCADE ,
    item_name varchar(100)
);

INSERT INTO person1(name, age) VALUES ('Tom', 12);
INSERT INTO "order"(user_id, item_name) VALUES (1, 'IPhone');

SELECT * FROM person1 JOIN "order"  ON person1.user_id = "order".user_id;

DELETE FROM person1 WHERE user_id=1;

SELECT * FROM "order";